(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2197],{10037:function(e,t,s){Promise.resolve().then(s.t.bind(s,88204,23)),Promise.resolve().then(s.bind(s,79649)),Promise.resolve().then(s.bind(s,52379))},60353:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(57437),r=s(3643),l=s(87138),i=s(16463);s(2265);var n=s(90089);function o(){let{t:e}=(0,n.$G)(),t=(0,i.usePathname)(),s=e=>{var s,a;let r=!1;return(null===(s=e.href)||void 0===s?void 0:s.includes("/"))&&(null===(a=e.href)||void 0===a?void 0:a.split("/")[1])==t.split("/")[1]&&(r=!0),e.length&&(r=e.some(e=>{var s;return(null===(s=e.href)||void 0===s?void 0:s.split("/")[1])==t.split("/")[1]})),e.length&&e.forEach(e=>{var s,a,l;null===(s=e.links)||void 0===s||s.forEach(e=>{var s,a;(null===(s=e.href)||void 0===s?void 0:s.includes("/"))&&(null===(a=e.href)||void 0===a?void 0:a.split("/")[1])==t.split("/")[1]&&(r=!0),e.length&&e.forEach(e=>{var s;null==e||null===(s=e.links)||void 0===s||s.forEach(e=>{e.href.split("/")[1]==t.split("/")[1]&&(r=!0)})})}),(null===(a=e.href)||void 0===a?void 0:a.includes("/"))&&(null===(l=e.href)||void 0===l?void 0:l.split("/")[1])==t.split("/")[1]&&(r=!0)}),r};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("li",{className:"current-dropdown",children:[(0,a.jsxs)("span",{className:s(r.nW)?"menuActive":"",children:[e("menu.about")," ",(0,a.jsx)("i",{className:"fa-solid fa-angle-down"})]}),(0,a.jsx)("ul",{className:"dropdown",children:r.nW.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{className:s(e)?"menuActive":"",href:e.href,children:e.label})},t))})]}),(0,a.jsxs)("li",{className:"current-dropdown",children:[(0,a.jsxs)("span",{className:s(r.yT)?"menuActive":"",children:[e("menu.cooperation")," ",(0,a.jsx)("i",{className:"fa-solid fa-angle-down"})]}),(0,a.jsx)("ul",{className:"dropdown",children:r.yT.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{className:s(e)?"menuActive":"",href:e.href,children:e.label})},t))})]}),(0,a.jsx)("li",{className:"current-dropdown",children:(0,a.jsx)(l.default,{className:"/contact"==t?"menuActive":"",href:"/contact",children:e("menu.contacts")})}),(0,a.jsx)("li",{className:"current-dropdown",children:(0,a.jsx)(l.default,{className:"/reviews"==t?"menuActive":"",href:"/#reviews",children:e("menu.reviews")})}),(0,a.jsx)("li",{className:"current-dropdown",children:(0,a.jsx)(l.default,{className:"/dealer"==t?"menuActive":"",href:"/dealer",children:e("menu.vacancies")})})]})}},52379:function(e,t,s){"use strict";s.d(t,{default:function(){return f}});var a=s(57437),r=s(2265),l=s(16463);s(28927);var i=s(87138),n=s(11362),o=s(58918),c=s.n(o),d=s(49690);function h(e){let{phone:t,setPhone:s,handlePhoneSubmit:r}=e,l=11===t.replace(/\D/g,"").length;return(0,a.jsxs)("div",{className:"form-box",children:[(0,a.jsxs)("div",{className:"login-text",children:[(0,a.jsx)("h2",{children:"Введите номер телефона"}),(0,a.jsx)("p",{children:"Для входа в личный кабинет"})]}),(0,a.jsxs)("form",{onSubmit:r,children:[(0,a.jsxs)("div",{className:"form_boxes",style:{position:"relative"},children:[(0,a.jsx)("label",{children:"Телефон"}),(0,a.jsx)(c(),{mask:"+7 (999) 999-99-99",maskPlaceholder:"",alwaysShowMask:!1,value:t,onChange:e=>s(e.target.value),children:e=>(0,a.jsx)("input",{...e,required:!0,type:"tel",placeholder:"+7",name:"phone",style:{paddingRight:"40px"}})}),l&&(0,a.jsx)(d.KP3,{style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",color:"green",fontSize:"22px"}})]}),(0,a.jsx)("div",{className:"form-submit",children:(0,a.jsx)(n.Z,{className:"w-full !ml-0",variant:"primary",type:"submit",disabled:!l,children:"Получить код"})}),(0,a.jsx)("div",{className:"politic-privacy",children:(0,a.jsxs)("p",{children:["Вводя номер телефона, вы соглашаетесь с"," ",(0,a.jsx)(i.default,{href:"/terms",children:(0,a.jsx)("span",{children:"Политикой Конфиденциальности"})})," ","и даёте"," ",(0,a.jsx)(i.default,{href:"/",children:(0,a.jsx)("span",{children:"Согласие на обработку персональных данных"})}),"."]})})]})]})}function m(e){let{handleCodeSubmit:t,handleResendCode:s}=e,[l,i]=(0,r.useState)(["","","",""]),n=(0,r.useRef)([]),[o,c]=(0,r.useState)(60);(0,r.useEffect)(()=>{if(o<=0)return;let e=setTimeout(()=>{c(o-1)},1e3);return()=>clearTimeout(e)},[o]);let d=e=>{e.every(e=>""!==e)&&t(e.join(""))},h=(e,t)=>{let s=e.replace(/\D/g,"");if(s.length>1){u(s,t);return}let a=[...l];a[t]=s,i(a);let r=n.current[t];s?r.classList.add("filled"):r.classList.remove("filled"),s&&t<3&&n.current[t+1].focus(),d(a)},m=(e,t)=>{"Backspace"===e.key&&!l[t]&&t>0&&n.current[t-1].focus()},u=(e,t)=>{let s=e.replace(/\D/g,"");if(!s)return;let a=[...l];for(let e=0;e<s.length;e++)if(t+e<4){a[t+e]=s[e];let r=n.current[t+e];r&&r.classList.add("filled")}i(a);let r=a.findIndex(e=>""===e);-1!==r&&n.current[r].focus(),d(a)},p=(e,t)=>{e.preventDefault(),u(e.clipboardData.getData("Text"),t)};return(0,a.jsxs)("div",{className:"form-box",children:[(0,a.jsx)("h2",{className:"code-step-title",children:"Введите смс код"}),(0,a.jsx)("p",{className:"code-step-subtitle",children:"SMS с кодом отправлено. Если не получите сообщение в течение 2\xa0минут, вам позвонит наш робот. Последние 4\xa0цифры номера будут кодом для входа. Не нужно отвечать на звонок."}),(0,a.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,a.jsx)("div",{className:"otp-container",children:[0,1,2,3].map(e=>(0,a.jsx)("input",{type:"text",maxLength:1,className:"otp-input",value:l[e],onChange:t=>h(t.target.value,e),onKeyDown:t=>m(t,e),onPaste:t=>p(t,e),ref:t=>n.current[e]=t},e))}),(0,a.jsxs)("div",{className:"resend-wrapper",style:{position:"relative",height:"2rem"},children:[(0,a.jsx)("button",{type:"button",className:"resend-button",onClick:()=>{s(),c(60)},disabled:o>0,style:{opacity:0===o?1:0,pointerEvents:0===o?"auto":"none",display:o>0?"none":"block",transition:"opacity 1s ease-in-out",position:"absolute",width:"100%"},children:"Выслать новый код"}),(0,a.jsxs)("div",{className:"resend-timer",style:{opacity:o>0?1:0,display:o>0?"block":"none",transition:"opacity 1s ease-in-out",position:"absolute",width:"100%",textAlign:"center",lineHeight:"2rem"},children:["Получить новый код можно через ",o," секунд"]})]})]})]})}function u(e){var t,s,l,o,c,h;let{registerData:m,setRegisterData:u,handleRegisterSubmit:p}=e,[f,x]=(0,r.useState)(1),g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return e?e.length>t?e.substring(0,t)+"...":e:""},v=(null===(t=m.firstName)||void 0===t?void 0:t.trim())!==""&&(null===(s=m.lastName)||void 0===s?void 0:s.trim())!==""&&(null===(l=m.email)||void 0===l?void 0:l.trim())!=="",j=!!m.idCardFrontImage&&!!m.idCardBackImage;return(0,a.jsxs)("div",{className:"form-box two",children:[(0,a.jsxs)("div",{className:"progress-stepper",children:[(0,a.jsx)("div",{className:"step ".concat(1===f?"active":""),children:"1"}),(0,a.jsx)("div",{className:"separator",children:"-"}),(0,a.jsx)("div",{className:"step ".concat(2===f?"active":""),children:"2"})]}),(0,a.jsxs)("div",{className:"login-text",children:[(0,a.jsxs)("h2",{children:["Регистрация | ",f," этап"]}),(0,a.jsx)("p",{children:1===f?"Введите личные данные.":"Прикрепите фото удостоверения с двух сторон для подтверждения личности."})]}),(0,a.jsxs)("form",{onSubmit:1===f?e=>{e.preventDefault(),x(2)}:p,children:[1===f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"form_boxes",style:{position:"relative"},children:[(0,a.jsxs)("label",{children:["Имя ",(0,a.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,a.jsx)("input",{required:!0,type:"text",name:"firstName",value:m.firstName,onChange:e=>u({...m,firstName:e.target.value})}),(null===(o=m.firstName)||void 0===o?void 0:o.trim())!==""&&(0,a.jsx)(d.KP3,{style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",color:"green",fontSize:"22px"}})]}),(0,a.jsxs)("div",{className:"form_boxes",style:{position:"relative"},children:[(0,a.jsxs)("label",{children:["Фамилия ",(0,a.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,a.jsx)("input",{required:!0,type:"text",name:"lastName",value:m.lastName,onChange:e=>u({...m,lastName:e.target.value})}),(null===(c=m.lastName)||void 0===c?void 0:c.trim())!==""&&(0,a.jsx)(d.KP3,{style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",color:"green",fontSize:"22px"}})]}),(0,a.jsxs)("div",{className:"form_boxes",style:{position:"relative"},children:[(0,a.jsx)("label",{children:"Отчество (необязательно)"}),(0,a.jsx)("input",{type:"text",name:"patronymic",value:m.patronymic||"",onChange:e=>u({...m,patronymic:e.target.value})}),m.patronymic&&""!==m.patronymic.trim()&&(0,a.jsx)(d.KP3,{style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",color:"green",fontSize:"22px"}})]}),(0,a.jsxs)("div",{className:"form_boxes",style:{position:"relative"},children:[(0,a.jsxs)("label",{children:["Email ",(0,a.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,a.jsx)("input",{required:!0,type:"email",name:"email",value:m.email,onChange:e=>u({...m,email:e.target.value})}),(null===(h=m.email)||void 0===h?void 0:h.trim())!==""&&(0,a.jsx)(d.KP3,{style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",color:"green",fontSize:"22px"}})]}),(0,a.jsx)("div",{className:"form-submit",children:(0,a.jsx)(n.Z,{className:"w-full !ml-0",variant:"primary",type:"submit",disabled:!v,children:"Далее"})})]}),2===f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,a.jsxs)("div",{className:"form_boxes upload-box",style:{position:"relative",flex:1},children:[(0,a.jsxs)("label",{className:"mb-4",children:["Лицевая сторона ",(0,a.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,a.jsx)("div",{className:"custom-file-upload",style:{border:"1px solid #f1f3f6",padding:"10px 25px",textAlign:"center",cursor:"pointer",background:(m.idCardFrontImage,"#f1f3f6")},onClick:()=>document.getElementById("idCardFrontImage").click(),children:m.idCardFrontImage?g(m.idCardFrontImage.name):"+ Загрузить"}),(0,a.jsx)("input",{required:!0,type:"file",name:"idCardFrontImage",id:"idCardFrontImage",style:{display:"none"},onChange:e=>{u({...m,idCardFrontImage:e.target.files[0]})}}),m.idCardFrontImage&&(0,a.jsx)(d.KP3,{style:{position:"absolute",right:"-10px",top:"70%",transform:"translateY(-50%)",color:"green",fontSize:"22px"}})]}),(0,a.jsxs)("div",{className:"form_boxes upload-box",style:{position:"relative",flex:1},children:[(0,a.jsxs)("label",{className:"mb-4",children:["Обратная сторона ",(0,a.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,a.jsx)("div",{className:"custom-file-upload",style:{border:"1px solid #f1f3f6",padding:"10px 25px",textAlign:"center",cursor:"pointer",background:(m.idCardBackImage,"#f1f3f6")},onClick:()=>document.getElementById("idCardBackImage").click(),children:m.idCardBackImage?g(m.idCardBackImage.name):"+ Загрузить"}),(0,a.jsx)("input",{required:!0,type:"file",name:"idCardBackImage",id:"idCardBackImage",style:{display:"none"},onChange:e=>{u({...m,idCardBackImage:e.target.files[0]})}}),m.idCardBackImage&&(0,a.jsx)(d.KP3,{style:{position:"absolute",right:"-10px",top:"70%",transform:"translateY(-50%)",color:"green",fontSize:"22px"}})]})]}),(0,a.jsxs)("div",{className:"form_submit_buttons",style:{display:"flex",gap:"1rem"},children:[(0,a.jsx)(n.Z,{className:"w-full !ml-0",variant:"secondary",onClick:e=>{e.preventDefault(),x(1)},children:"Назад"}),(0,a.jsx)(n.Z,{className:"w-full !ml-0",variant:"primary",type:"submit",disabled:!j,children:"Зарегистрироваться"})]})]})]}),(0,a.jsx)("div",{className:"politic-privacy",children:(0,a.jsxs)("p",{children:["Вводя персональные данные, вы соглашаетесь с"," ",(0,a.jsx)(i.default,{href:"/terms",children:(0,a.jsx)("span",{children:"Политикой Конфиденциальности"})})," ","и даёте"," ",(0,a.jsx)(i.default,{href:"/",children:(0,a.jsx)("span",{children:"Согласие на обработку персональных данных"})}),"."]})})]})}function p(e){let{errorMessage:t}=e;return t?(0,a.jsx)("div",{className:"messages-box-el",children:(0,a.jsx)("div",{className:"alert alert-error fade show",role:"alert",children:(0,a.jsx)("p",{children:t})})}):null}function f(){let e=(0,l.useRouter)(),[t,s]=(0,r.useState)("phone"),[i,n]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[d,f]=(0,r.useState)({phoneNumber:"",email:"",firstName:"",lastName:"",password:"",confirmPassword:"",role:"courier"}),[x,g]=(0,r.useState)(""),v=async e=>{e.preventDefault(),g("");let t=i.replace(/\D/g,"");try{let e=await fetch("http://localhost:4000/auth/sendCode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:t})}),a=await e.json();if(!e.ok)throw Error(a.message||"Ошибка при отправке кода");s("code")}catch(e){console.error("Ошибка при отправке телефона:",e.message),g(e.message)}},j=async t=>{g(""),c(t);let a=i.replace(/\D/g,"");try{let r=await fetch("http://localhost:4000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:a,code:t})}),l=await r.json();if(!r.ok)throw Error(l.message||"Ошибка проверки кода");if(l.isSuccess){if(l.data.registrationRequired)f(e=>({...e,phoneNumber:a,code:t})),s("register");else{localStorage.setItem("accessToken",l.data.accessToken);let t=await fetch("http://localhost:4000/user/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.data.accessToken)}}),s=await t.json();localStorage.setItem("userData",JSON.stringify(s.data)),localStorage.setItem("userRole",s.data.roles[0].name),e.push("/dashboard")}}else throw Error("Ошибка авторизации")}catch(e){console.error("Ошибка при проверке кода:",e.message),g(e.message)}},b=async()=>{g("");let e=i.replace(/\D/g,"");try{let t=await fetch("http://localhost:4000/auth/sendCode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:e})}),s=await t.json();if(!t.ok)throw Error(s.message||"Ошибка при отправке кода")}catch(e){console.error("Ошибка при отправке телефона:",e.message),g(e.message)}},y=async t=>{t.preventDefault(),g("");try{let t=d.idCardFrontImage?URL.createObjectURL(d.idCardFrontImage):"",s=d.idCardBackImage?URL.createObjectURL(d.idCardBackImage):"",{password:a,confirmPassword:r,...l}=d,i={...l,idCardFrontImage:t,idCardBackImage:s};console.log(i);let n=await fetch("http://localhost:4000/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),o=await n.json();localStorage.setItem("accessToken",o.data.accessToken);let c=await fetch("http://localhost:4000/user/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.data.accessToken)}}),h=await c.json();localStorage.setItem("userData",JSON.stringify(h.data)),localStorage.setItem("userRole",h.data.roles[0].name),e.push("/dashboard")}catch(e){console.error("Ошибка регистрации:",e.message),g(e.message)}};return(0,a.jsx)("section",{className:"login-section layout-radius",style:{background:"transparent"},children:(0,a.jsx)("div",{className:"inner-container",children:(0,a.jsx)("div",{className:"right-box",children:(0,a.jsxs)("div",{className:"form-sec",children:[(0,a.jsx)(p,{errorMessage:x}),"phone"===t&&(0,a.jsx)(h,{phone:i,setPhone:n,handlePhoneSubmit:v}),"code"===t&&(0,a.jsx)(m,{code:o,setCode:c,handleCodeSubmit:j,handleResendCode:b}),"register"===t&&(0,a.jsx)(u,{registerData:d,setRegisterData:f,handleRegisterSubmit:y})]})})})})}},3643:function(e,t,s){"use strict";s.d(t,{L1:function(){return c},ZR:function(){return o},nW:function(){return i},ni:function(){return a},or:function(){return r},vz:function(){return n},yT:function(){return l}});let a=[{href:"/",title:"Home"}],r=[{links:[{href:"/inventory-list-01",label:"Электровелосипеды"}]}],l=[{href:"/inventory-list-01",label:"Велосипеды"},{href:"/#service",label:"Сервис"}],i=[{href:"/about",label:"История"},{href:"/#features",label:"Преимущества"}],n=[{href:"/blog-list-01",label:"Blog List 01"},{href:"/blog-list-02",label:"Blog List 02"},{href:"/blog-list-03",label:"Blog List 03"},{href:"/blog-single/1",label:"Blog Single"}],o=[{href:"/shop-list",label:"Shop List"},{href:"/shop-single/1",label:"Shop Single"},{href:"/cart",label:"Cart"},{href:"/checkout",label:"Checkout"}],c=[{title:"Dashboard",iconClass:"fa fa-angle-right",links:[{title:"Dashboard",href:"/dashboard"},{title:"My Listings",href:"/my-listings"},{title:"Add Listings",href:"/add-listings"},{title:"Favorites",href:"/favorite"},{title:"Saved Search",href:"/saved"},{title:"Messages",href:"/messages"},{title:"Profile",href:"/profile"}]},{title:"About",href:"/about"},{title:"Services",href:"/contact"},{title:"Login",href:"/login"},{title:"FAQs",href:"/faq"},{title:"Pricing",href:"/pricing"},{title:"Terms",href:"/terms"},{title:"Team List",href:"/team-list"},{title:"Team Single",href:"/team-single/1"},{title:"Dealer List",href:"/dealer"},{title:"Dealer Single",href:"/dealer-single/1"},{title:"Loan Calculator",href:"/loan-calculator"},{title:"Compare",href:"/compare"},{title:"404",href:"/404"},{title:"Invoice",href:"/invoice"},{title:"UI Elements",href:"/ui-elements"}]},88204:function(){},28927:function(){}},function(e){e.O(0,[8870,5076,3231,320,7699,6051,7240,5706,1694,8422,7259,2185,6648,2968,9649,2971,7023,1744],function(){return e(e.s=10037)}),_N_E=e.O()}]);